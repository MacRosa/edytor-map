<!DOCTYPE html>
<!--suppress HtmlUnknownTag -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="model" type="pl.rosa.mapeditor.models.Map"*/-->
<!--/*@thymesVar id="notfound" type="boolean"*/-->
<!--/*@thymesVar id="noaccess" type="boolean"*/-->
<head>
    <meta charset="UTF-8">
    <div th:replace="fragments/styles :: styles"></div>
    <link th:href="@{/css/leaflet.css}" rel="stylesheet"/>
    <title th:unless="${notfound || noaccess}" >
        <span th:text="${model.name}" th:remove="tag"></span>
        </title>
    <title th:if="${notfound || noaccess}">Error</title>
</head>
    <body>

        <div th:replace="fragments/navbar :: navbar" ></div>
        <div th:unless="${notfound || noaccess}" class="container mt-5">
            <h2 th:text="${model.name}"></h2>
            <p>Description:</p>
            <p th:text="${model.description}"></p>

            <div th:if="${@mapService.currentUserCanEdit(model)}" class="container">
                <a class="btn btn-primary" th:href="@{/map/edit/{map_id}(map_id=${model.id})}">Edit</a>
            </div>
            <div id="mapView" style="width: 500px; height: 500px;">
            </div>
        </div>
        <div th:if="${notfound}" class="container mt-5">
            <h2>Error</h2>
            <p>Map not found.</p>
        </div>
        <div th:if="${noaccess}" class="container mt-5">
            <h2>Error</h2>
            <p>You have no access to this map.</p>
        </div>
    </body>
    <div th:replace="fragments/scripts :: scripts"></div>
    <script th:src="@{/js/leaflet.js}"></script>
    <!--suppress ES6ModulesDependencies -->
    <script th:inline="javascript"  th:unless="${notfound || noaccess}">
        window.onload = function(){
            /*<![CDATA[*/
            let mapValue =   /*[[${model.id}]]*/ 0;
            let mapUrl = /*[[@{/map/svg/}]]*/ '/map/svg/';
            /*]]>*/
            let myMap = L.map('mapView', {zoom: 0, center: [250, 250], crs: L.CRS.Simple});
            let imageBounds = [ [0, 0], [500, 500] ];
            L.imageOverlay(mapUrl+mapValue,imageBounds).addTo(myMap);
        }
    </script>
</html>